<!DOCTYPE html>
<html>
<head>
    <title>Modalä¿®å¤æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Modalä¿®å¤æµ‹è¯•</h1>
    
    <div class="section info">
        <h3>ä¿®å¤è¯´æ˜</h3>
        <p>ä¿®å¤äº†Modal.confirmä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼š</p>
        <ul>
            <li>åœ¨app/layout.tsxä¸­æ·»åŠ äº†Ant Designçš„Appç»„ä»¶åŒ…è£…å™¨</li>
            <li>åœ¨page.tsxä¸­ä½¿ç”¨App.useApp()è·å–modalå®ä¾‹</li>
            <li>å°†Modal.confirmæ”¹ä¸ºmodal.confirm</li>
        </ul>
    </div>
    
    <div class="section">
        <h3>æµ‹è¯•æ­¥éª¤</h3>
        <ol>
            <li>ç¡®ä¿åº”ç”¨å·²é‡æ–°å¯åŠ¨ï¼ˆå› ä¸ºä¿®æ”¹äº†layout.tsxï¼‰</li>
            <li>è®¿é—®ä¸»åº”ç”¨: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
            <li>ç¡®ä¿å·²ç™»å½•å¹¶æœ‰ä¼šè¯æ•°æ®</li>
            <li>å³é”®ç‚¹å‡»ä»»æ„ä¼šè¯é¡¹</li>
            <li>ç‚¹å‡»"Delete"èœå•é¡¹</li>
            <li>åº”è¯¥çœ‹åˆ°åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†</li>
            <li>ç‚¹å‡»"Rename"èœå•é¡¹</li>
            <li>åº”è¯¥çœ‹åˆ°é‡å‘½åè¾“å…¥å¯¹è¯æ¡†</li>
        </ol>
    </div>
    
    <div class="section">
        <h3>é¢„æœŸè¡Œä¸º</h3>
        <ul>
            <li>âœ… æ§åˆ¶å°æ˜¾ç¤º: <code>ğŸ¯ èœå•ç‚¹å‡»:</code></li>
            <li>âœ… æ§åˆ¶å°æ˜¾ç¤º: <code>ğŸ—‘ï¸ å¤„ç†åˆ é™¤ä¼šè¯:</code></li>
            <li>âœ… æ˜¾ç¤ºåˆ é™¤ç¡®è®¤å¯¹è¯æ¡†</li>
            <li>âœ… æ§åˆ¶å°æ˜¾ç¤º: <code>ğŸ”„ å¤„ç†é‡å‘½åä¼šè¯:</code></li>
            <li>âœ… æ˜¾ç¤ºé‡å‘½åè¾“å…¥å¯¹è¯æ¡†</li>
        </ul>
    </div>
    
    <div class="section">
        <h3>å¿«é€Ÿå‡†å¤‡</h3>
        <button onclick="quickSetup()">å¿«é€Ÿè®¾ç½®ï¼ˆç™»å½•+åˆ›å»ºä¼šè¯ï¼‰</button>
        <div id="setup-result"></div>
    </div>
    
    <div class="section">
        <h3>æ•…éšœæ’é™¤</h3>
        <p>å¦‚æœå¯¹è¯æ¡†ä»ç„¶ä¸æ˜¾ç¤ºï¼š</p>
        <ul>
            <li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰JavaScripté”™è¯¯</li>
            <li>ç¡®ä¿åº”ç”¨å·²é‡æ–°å¯åŠ¨</li>
            <li>å°è¯•ç¡¬åˆ·æ–°é¡µé¢ (Ctrl+F5)</li>
            <li>æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–Modalæˆ–å¼¹çª—é˜»æŒ¡</li>
        </ul>
    </div>

    <script>
        async function quickSetup() {
            document.getElementById('setup-result').innerHTML = '<div class="info">æ­£åœ¨è®¾ç½®...</div>';
            
            try {
                // 1. ç™»å½•
                const loginResponse = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: 'test@example.com', password: '123456' })
                });
                
                const loginData = await loginResponse.json();
                if (!loginData.success) {
                    throw new Error('ç™»å½•å¤±è´¥: ' + loginData.message);
                }
                
                localStorage.setItem('auth_token', loginData.data.token);
                localStorage.setItem('user_info', JSON.stringify(loginData.data.user));
                
                // 2. åˆ›å»ºæµ‹è¯•ä¼šè¯
                const sessionResponse = await fetch('/api/sessions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${loginData.data.token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ title: 'Modalæµ‹è¯•ä¼šè¯ ' + new Date().toLocaleTimeString() })
                });
                
                const sessionData = await sessionResponse.json();
                if (!sessionData.success) {
                    throw new Error('åˆ›å»ºä¼šè¯å¤±è´¥: ' + sessionData.message);
                }
                
                document.getElementById('setup-result').innerHTML = 
                    '<div class="success">âœ… è®¾ç½®å®Œæˆï¼<br>' +
                    'å·²ç™»å½•ç”¨æˆ·: ' + loginData.data.user.email + '<br>' +
                    'å·²åˆ›å»ºä¼šè¯: ' + sessionData.data.title + '<br><br>' +
                    '<strong>ä¸‹ä¸€æ­¥:</strong><br>' +
                    '1. è®¿é—® <a href="http://localhost:3000" target="_blank">ä¸»åº”ç”¨</a><br>' +
                    '2. å³é”®ç‚¹å‡»ä¼šè¯é¡¹<br>' +
                    '3. æµ‹è¯•åˆ é™¤å’Œé‡å‘½ååŠŸèƒ½</div>';
                
            } catch (error) {
                document.getElementById('setup-result').innerHTML = 
                    '<div class="error">âŒ è®¾ç½®å¤±è´¥: ' + error.message + '</div>';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥è®¤è¯çŠ¶æ€
        window.onload = function() {
            const token = localStorage.getItem('auth_token');
            if (token) {
                document.getElementById('setup-result').innerHTML = 
                    '<div class="success">âœ… ç”¨æˆ·å·²ç™»å½•ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•</div>';
            }
        };
    </script>
</body>
</html>